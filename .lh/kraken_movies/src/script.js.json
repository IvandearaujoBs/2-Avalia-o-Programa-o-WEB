{
    "sourceFile": "kraken_movies/src/script.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1762865912625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762985282086,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1 @@\n+C:\\Users\\ivanm\\OneDrive\\Documentos\\Avaliações WEB\\2° Avaliação\\kraken_movies\\src\\script.js\n\\ No newline at end of file\n"
                },
                {
                    "date": 1762985292607,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,1 @@\n-C:\\Users\\ivanm\\OneDrive\\Documentos\\Avaliações WEB\\2° Avaliação\\kraken_movies\\src\\script.js\n\\ No newline at end of file\n+src\\script.js\n\\ No newline at end of file\n"
                },
                {
                    "date": 1762985298353,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,2 @@\n-src\\script.js\n\\ No newline at end of file\n+src\\script.js\r\n+\r\n"
                },
                {
                    "date": 1762985572481,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,2 +1,426 @@\n src\\script.js\r\n \r\n+\r\n+const API_CONFIG = {\r\n+    baseURL: 'https://api.embedmovies.org/api',\r\n+};\r\n+\r\n+const appState = {\r\n+    currentPage: 1,\r\n+    itemsPerPage: 20,\r\n+    allMovies: [],\r\n+    filteredMovies: [],\r\n+    currentFilter: 'all',\r\n+    searchQuery: '',\r\n+    isLoading: false\r\n+};\r\n+\r\n+const elements = {\r\n+    searchInput: document.getElementById('searchInput'),\r\n+    searchBtn: document.getElementById('searchBtn'),\r\n+    filterBtns: document.querySelectorAll('.filter-btn'),\r\n+    moviesGrid: document.getElementById('moviesGrid'),\r\n+    loading: document.getElementById('loading'),\r\n+    error: document.getElementById('error'),\r\n+    noResults: document.getElementById('noResults'),\r\n+    pagination: document.getElementById('pagination'),\r\n+    prevBtn: document.getElementById('prevBtn'),\r\n+    nextBtn: document.getElementById('nextBtn'),\r\n+    pageInfo: document.getElementById('pageInfo'),\r\n+    modal: document.getElementById('movieModal'),\r\n+    modalClose: document.querySelector('.modal-close')\r\n+};\r\n+\r\n+/**\r\n+ * \r\n+ * @param {string} query \r\n+ * @returns {Promise<Array>} \r\n+ */\r\n+async function searchMovies(query) {\r\n+    try {\r\n+        showLoading(true);\r\n+        hideError();\r\n+        const movies = await fetchMoviesFromEmbedAPI(query);\r\n+\r\n+        appState.allMovies = movies;\r\n+        appState.currentPage = 1;\r\n+        filterMovies();\r\n+        displayMovies();\r\n+\r\n+    } catch (error) {\r\n+        console.error('Erro ao buscar filmes:', error);\r\n+        showError('Erro ao buscar filmes. Tente novamente mais tarde.');\r\n+    } finally {\r\n+        showLoading(false);\r\n+    }\r\n+}\r\n+\r\n+/**\r\n+ * \r\n+ * @param {string} query \r\n+ * @returns {Promise<Array>}\r\n+ */\r\n+async function fetchMoviesFromEmbedAPI(query) {\r\n+    try {\r\n+        const endpoints = [\r\n+            `https://embedmovies.org/api/search?q=${encodeURIComponent(query)}`,\r\n+            `https://api.embedmovies.org/search?q=${encodeURIComponent(query)}`,\r\n+        ];\r\n+\r\n+        for (const endpoint of endpoints) {\r\n+            try {\r\n+                const response = await fetch(endpoint, {\r\n+                    method: 'GET',\r\n+                    headers: {\r\n+                        'Content-Type': 'application/json',\r\n+                        // Adicione headers necessários aqui\r\n+                    }\r\n+                });\r\n+\r\n+                if (response.ok) {\r\n+                    const data = await response.json();\r\n+                    return formatMoviesData(data);\r\n+                }\r\n+            } catch (e) {\r\n+                console.log(`Endpoint ${endpoint} não disponível`);\r\n+            }\r\n+        }\r\n+\r\n+        // Se nenhum endpoint funcionar, retorne dados de exemplo\r\n+        return getExampleMovies(query);\r\n+\r\n+    } catch (error) {\r\n+        console.error('Erro ao conectar com API:', error);\r\n+        return getExampleMovies(query);\r\n+    }\r\n+}\r\n+\r\n+/**\r\n+ * Formata dados da API para o formato esperado\r\n+ * @param {Object} data - Dados da API\r\n+ * @returns {Array}\r\n+ */\r\n+function formatMoviesData(data) {\r\n+    // Adapte esta função conforme o formato da resposta da API\r\n+    if (Array.isArray(data)) {\r\n+        return data.map(item => ({\r\n+            id: item.id || item.imdbId || Math.random(),\r\n+            title: item.title || item.name || 'Sem título',\r\n+            year: item.year || item.releaseDate?.split('-')[0] || 'N/A',\r\n+            poster: item.poster || item.posterPath || '/placeholder.jpg',\r\n+            description: item.description || item.overview || '',\r\n+            type: item.type || (item.mediaType === 'tv' ? 'series' : 'movie'),\r\n+            imdbId: item.imdbId || item.imdbID || '',\r\n+            tmdbId: item.tmdbId || item.id || '',\r\n+            rating: item.rating || item.voteAverage || 'N/A'\r\n+        }));\r\n+    }\r\n+    return [];\r\n+}\r\n+\r\n+/**\r\n+ * Retorna filmes de exemplo para demonstração\r\n+ * @param {string} query - Termo de busca\r\n+ * @returns {Array}\r\n+ */\r\n+function getExampleMovies(query) {\r\n+    const allExamples = [\r\n+        {\r\n+            id: 1,\r\n+            title: 'Inception',\r\n+            year: '2010',\r\n+            poster: 'https://image.tmdb.org/t/p/w500/oYuLEt3zVCKq57qu1F8dT7NIrjG.jpg',\r\n+            description: 'Um ladrão que rouba segredos corporativos através da tecnologia de compartilhamento de sonhos recebe a tarefa inversa de plantar uma ideia.',\r\n+            type: 'movie',\r\n+            imdbId: 'tt1375666',\r\n+            tmdbId: '27205',\r\n+            rating: '8.8'\r\n+        },\r\n+        {\r\n+            id: 2,\r\n+            title: 'The Dark Knight',\r\n+            year: '2008',\r\n+            poster: 'https://image.tmdb.org/t/p/w220_and_h330_face/4lj1ikfsSmMZNyfdi8R8Tv5tsgb.jpg',\r\n+            description: 'Quando a ameaça conhecida como o Coringa causa estragos e caos no povo de Gotham, Batman deve aceitar um dos testes psicológicos e físicos.',\r\n+            type: 'movie',\r\n+            imdbId: 'tt0468569',\r\n+            tmdbId: '155',\r\n+            rating: '9.0'\r\n+        },\r\n+        {\r\n+            id: 3,\r\n+            title: 'Breaking Bad',\r\n+            year: '2008',\r\n+            poster: 'https://image.tmdb.org/t/p/w220_and_h330_face/30erzlzIOtOK3k3T3BAl1GiVMP1.jpg',\r\n+            description: 'Um professor de química desempregado diagnosticado com câncer terminal se une a um ex-aluno de meth para garantir o futuro de sua família.',\r\n+            type: 'series',\r\n+            imdbId: 'tt0903747',\r\n+            tmdbId: '1396',\r\n+            rating: '9.5'\r\n+        },\r\n+        {\r\n+            id: 4,\r\n+            title: 'Interstellar',\r\n+            year: '2014',\r\n+            poster: 'https://image.tmdb.org/t/p/w220_and_h330_face/6ricSDD83BClJsFdGB6x7cM0MFQ.jpg',\r\n+            description: 'Um grupo de astronautas viaja através de um buraco de minhoca no espaço na tentativa de garantir a sobrevivência da humanidade.',\r\n+            type: 'movie',\r\n+            imdbId: 'tt0816692',\r\n+            tmdbId: '157336',\r\n+            rating: '8.6'\r\n+        },\r\n+        {\r\n+            id: 5,\r\n+            title: 'Stranger Things',\r\n+            year: '2016',\r\n+            poster: 'https://image.tmdb.org/t/p/w500/x2lpQiKNzs2xCx6/5ub52Fq7d4Oa8QYZ6qJYlJA.jpg',\r\n+            description: 'Quando um menino desaparece, seus amigos, sua família e a polícia local devem lidar com forças estranhas e mistérios secretos.',\r\n+            type: 'series',\r\n+            imdbId: 'tt4574334',\r\n+            tmdbId: '66732',\r\n+            rating: '8.7'\r\n+        },\r\n+        {\r\n+            id: 6,\r\n+            title: 'Pulp Fiction',\r\n+            year: '1994',\r\n+            poster: 'https://image.tmdb.org/t/p/w500/d5iIlW_szoE486cd4MKAdOvxA4t.jpg',\r\n+            description: 'A vida de vários criminosos de Los Angeles se entrelaça em quatro histórias de violência e redenção.',\r\n+            type: 'movie',\r\n+            imdbId: 'tt0110912',\r\n+            tmdbId: '680',\r\n+            rating: '8.9'\r\n+        }\r\n+    ];\r\n+\r\n+    // Filtra baseado na query\r\n+    if (!query) return allExamples;\r\n+\r\n+    return allExamples.filter(movie =>\r\n+        movie.title.toLowerCase().includes(query.toLowerCase()) ||\r\n+        movie.description.toLowerCase().includes(query.toLowerCase())\r\n+    );\r\n+}\r\n+\r\n+// ============================================\r\n+// Funções de Filtro e Exibição\r\n+// ============================================\r\n+\r\n+/**\r\n+ * Filtra filmes baseado no tipo selecionado\r\n+ */\r\n+function filterMovies() {\r\n+    appState.filteredMovies = appState.allMovies.filter(movie => {\r\n+        if (appState.currentFilter === 'all') return true;\r\n+        if (appState.currentFilter === 'movies') return movie.type === 'movie';\r\n+        if (appState.currentFilter === 'series') return movie.type === 'series';\r\n+        return true;\r\n+    });\r\n+}\r\n+\r\n+/**\r\n+ * Exibe os filmes na página\r\n+ */\r\n+function displayMovies() {\r\n+    const startIndex = (appState.currentPage - 1) * appState.itemsPerPage;\r\n+    const endIndex = startIndex + appState.itemsPerPage;\r\n+    const moviesToDisplay = appState.filteredMovies.slice(startIndex, endIndex);\r\n+\r\n+    if (moviesToDisplay.length === 0) {\r\n+        elements.moviesGrid.innerHTML = '';\r\n+        elements.noResults.classList.remove('hidden');\r\n+        elements.pagination.classList.add('hidden');\r\n+        return;\r\n+    }\r\n+\r\n+    elements.noResults.classList.add('hidden');\r\n+    elements.moviesGrid.innerHTML = moviesToDisplay.map(movie => createMovieCard(movie)).join('');\r\n+\r\n+    // Adiciona event listeners aos cards\r\n+    document.querySelectorAll('.movie-card').forEach(card => {\r\n+        card.addEventListener('click', () => {\r\n+            const movieId = card.dataset.movieId;\r\n+            const movie = appState.allMovies.find(m => m.id == movieId);\r\n+            if (movie) openModal(movie);\r\n+        });\r\n+    });\r\n+\r\n+    updatePagination();\r\n+}\r\n+\r\n+/**\r\n+ * Cria o HTML de um card de filme\r\n+ * @param {Object} movie - Dados do filme\r\n+ * @returns {string}\r\n+ */\r\n+function createMovieCard(movie) {\r\n+    const typeLabel = movie.type === 'series' ? 'Série' : 'Filme';\r\n+    return `\r\n+        <div class=\"movie-card\" data-movie-id=\"${movie.id}\">\r\n+            <img src=\"${movie.poster}\" alt=\"${movie.title}\" class=\"movie-poster\" onerror=\"this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22300%22%3E%3Crect fill=%22%23404040%22 width=%22200%22 height=%22300%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Arial%22 font-size=%2216%22 fill=%22%23888%22%3ESem Imagem%3C/text%3E%3C/svg%3E'\">\r\n+            <div class=\"movie-overlay\">\r\n+                <button class=\"overlay-btn\">Ver Detalhes</button>\r\n+            </div>\r\n+            <div class=\"movie-info\">\r\n+                <h3 class=\"movie-title\" title=\"${movie.title}\">${movie.title}</h3>\r\n+                <p class=\"movie-year\">${movie.year} • ${typeLabel}</p>\r\n+                ${movie.rating !== 'N/A' ? `<span class=\"movie-rating\">⭐ ${movie.rating}</span>` : ''}\r\n+            </div>\r\n+        </div>\r\n+    `;\r\n+}\r\n+\r\n+/**\r\n+ * Atualiza os controles de paginação\r\n+ */\r\n+function updatePagination() {\r\n+    const totalPages = Math.ceil(appState.filteredMovies.length / appState.itemsPerPage);\r\n+\r\n+    if (totalPages <= 1) {\r\n+        elements.pagination.classList.add('hidden');\r\n+        return;\r\n+    }\r\n+\r\n+    elements.pagination.classList.remove('hidden');\r\n+    elements.pageInfo.textContent = `Página ${appState.currentPage} de ${totalPages}`;\r\n+    elements.prevBtn.disabled = appState.currentPage === 1;\r\n+    elements.nextBtn.disabled = appState.currentPage === totalPages;\r\n+}\r\n+\r\n+// ============================================\r\n+// Modal\r\n+// ============================================\r\n+\r\n+/**\r\n+ * Abre o modal com detalhes do filme\r\n+ * @param {Object} movie - Dados do filme\r\n+ */\r\n+function openModal(movie) {\r\n+    document.getElementById('modalTitle').textContent = movie.title;\r\n+    document.getElementById('modalYear').textContent = `${movie.year} • ${movie.type === 'series' ? 'Série' : 'Filme'}`;\r\n+    document.getElementById('modalDescription').textContent = movie.description;\r\n+    document.getElementById('modalPoster').src = movie.poster;\r\n+\r\n+    // Links para TMDB e IMDb\r\n+    if (movie.tmdbId) {\r\n+        document.getElementById('tmdbLink').href = `https://www.themoviedb.org/${movie.type === 'series' ? 'tv' : 'movie'}/${movie.tmdbId}`;\r\n+    }\r\n+\r\n+    if (movie.imdbId) {\r\n+        document.getElementById('imdbLink').href = `https://www.imdb.com/title/${movie.imdbId}/`;\r\n+    }\r\n+\r\n+    // Link para assistir (usando EmbedMovies)\r\n+    if (movie.imdbId) {\r\n+        document.getElementById('watchLink').href = `https://embedmovies.org/?s=${encodeURIComponent(movie.title)}`;\r\n+    } else {\r\n+        document.getElementById('watchLink').href = `https://embedmovies.org/?s=${encodeURIComponent(movie.title)}`;\r\n+    }\r\n+\r\n+    elements.modal.classList.remove('hidden');\r\n+}\r\n+\r\n+/**\r\n+ * Fecha o modal\r\n+ */\r\n+function closeModal() {\r\n+    elements.modal.classList.add('hidden');\r\n+}\r\n+\r\n+// ============================================\r\n+// Utilitários\r\n+// ============================================\r\n+\r\n+/**\r\n+ * Mostra/esconde o spinner de carregamento\r\n+ * @param {boolean} show\r\n+ */\r\n+function showLoading(show) {\r\n+    if (show) {\r\n+        elements.loading.classList.remove('hidden');\r\n+    } else {\r\n+        elements.loading.classList.add('hidden');\r\n+    }\r\n+}\r\n+\r\n+/**\r\n+ * Mostra mensagem de erro\r\n+ * @param {string} message\r\n+ */\r\n+function showError(message) {\r\n+    elements.error.textContent = message;\r\n+    elements.error.classList.remove('hidden');\r\n+}\r\n+\r\n+/**\r\n+ * Esconde mensagem de erro\r\n+ */\r\n+function hideError() {\r\n+    elements.error.classList.add('hidden');\r\n+}\r\n+\r\n+// ============================================\r\n+// Event Listeners\r\n+// ============================================\r\n+\r\n+// Busca ao clicar no botão\r\n+elements.searchBtn.addEventListener('click', () => {\r\n+    appState.searchQuery = elements.searchInput.value.trim();\r\n+    if (appState.searchQuery) {\r\n+        searchMovies(appState.searchQuery);\r\n+    }\r\n+});\r\n+\r\n+// Busca ao pressionar Enter\r\n+elements.searchInput.addEventListener('keypress', (e) => {\r\n+    if (e.key === 'Enter') {\r\n+        elements.searchBtn.click();\r\n+    }\r\n+});\r\n+\r\n+// Filtros\r\n+elements.filterBtns.forEach(btn => {\r\n+    btn.addEventListener('click', () => {\r\n+        elements.filterBtns.forEach(b => b.classList.remove('active'));\r\n+        btn.classList.add('active');\r\n+        appState.currentFilter = btn.dataset.filter;\r\n+        appState.currentPage = 1;\r\n+        filterMovies();\r\n+        displayMovies();\r\n+    });\r\n+});\r\n+\r\n+// Paginação\r\n+elements.prevBtn.addEventListener('click', () => {\r\n+    if (appState.currentPage > 1) {\r\n+        appState.currentPage--;\r\n+        displayMovies();\r\n+        window.scrollTo(0, 0);\r\n+    }\r\n+});\r\n+\r\n+elements.nextBtn.addEventListener('click', () => {\r\n+    const totalPages = Math.ceil(appState.filteredMovies.length / appState.itemsPerPage);\r\n+    if (appState.currentPage < totalPages) {\r\n+        appState.currentPage++;\r\n+        displayMovies();\r\n+        window.scrollTo(0, 0);\r\n+    }\r\n+});\r\n+\r\n+// Modal\r\n+elements.modalClose.addEventListener('click', closeModal);\r\n+elements.modal.addEventListener('click', (e) => {\r\n+    if (e.target === elements.modal) closeModal();\r\n+});\r\n+\r\n+// ============================================\r\n+// Inicialização\r\n+// ============================================\r\n+\r\n+// Carrega filmes de exemplo ao iniciar\r\n+document.addEventListener('DOMContentLoaded', () => {\r\n+    appState.allMovies = getExampleMovies('');\r\n+    filterMovies();\r\n+    displayMovies();\r\n+});\n\\ No newline at end of file\n"
                },
                {
                    "date": 1762985581186,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,5 @@\n-src\\script.js\r\n \r\n-\r\n const API_CONFIG = {\r\n     baseURL: 'https://api.embedmovies.org/api',\r\n };\r\n \r\n"
                }
            ],
            "date": 1762865912625,
            "name": "Commit-0",
            "content": ""
        }
    ]
}